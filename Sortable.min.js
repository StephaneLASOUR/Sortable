/*! Sortable 1.14.0 - MIT | git://github.com/SortableJS/Sortable.git */
import{version}from"../package.json";import{IE11OrLess,Edge,FireFox,Safari,IOS,ChromeForAndroid}from"./BrowserInfo.js";import AnimationStateManager from"./Animation.js";import PluginManager from"./PluginManager.js";import dispatchEvent from"./EventDispatcher.js";import{on,off,closest,toggleClass,css,matrix,find,getWindowScrollingElement,getRect,isScrolledPast,getChild,lastChild,index,getRelativeScrollOffset,extend,throttle,scrollBy,clone,expando}from"./utils.js";let pluginEvent=function(t,e,{evt:o,...n}={}){PluginManager.pluginEvent.bind(Sortable)(t,e,{dragEl:dragEl,parentEl:parentEl,ghostEl:ghostEl,rootEl:rootEl,nextEl:nextEl,lastDownEl:lastDownEl,cloneEl:cloneEl,cloneHidden:cloneHidden,dragStarted:moved,putSortable:putSortable,activeSortable:Sortable.active,originalEvent:o,oldIndex:oldIndex,oldDraggableIndex:oldDraggableIndex,newIndex:newIndex,newDraggableIndex:newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden(){cloneHidden=!0},cloneNowShown(){cloneHidden=!1},dispatchSortableEvent(t){_dispatchEvent({sortable:e,name:t,originalEvent:o})},...n})};function _dispatchEvent(t){dispatchEvent({putSortable:putSortable,cloneEl:cloneEl,targetEl:dragEl,rootEl:rootEl,oldIndex:oldIndex,oldDraggableIndex:oldDraggableIndex,newIndex:newIndex,newDraggableIndex:newDraggableIndex,...t})}let dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,pastFirstInvertThresh=!1,isCircumstantialInvert=!1,targetMoveDistance,ghostRelativeParent,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[];const documentExists="undefined"!=typeof document,PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(documentExists){if(IE11OrLess)return!1;let t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),_detectDirection=function(t,e){let o=css(t),n=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),a=getChild(t,0,e),l=getChild(t,1,e),r=a&&css(a),i=l&&css(l),s=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+getRect(a).width,d=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+getRect(l).width;if("flex"===o.display)return"column"===o.flexDirection||"column-reverse"===o.flexDirection?"vertical":"horizontal";if("grid"===o.display)return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&r.float&&"none"!==r.float){e="left"===r.float?"left":"right";return!l||"both"!==i.clear&&i.clear!==e?"horizontal":"vertical"}return a&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||n<=s&&"none"===o[CSSFloatProperty]||l&&"none"===o[CSSFloatProperty]&&n<s+d)?"vertical":"horizontal"},_dragElInRowColumn=function(t,e,o){var n=o?t.left:t.top,a=o?t.right:t.bottom,l=o?t.width:t.height,r=o?e.left:e.top,t=o?e.right:e.bottom,e=o?e.width:e.height;return n===r||a===t||n+l/2===r+e/2},_detectNearestEmptySortable=function(a,l){let r;return sortables.some(t=>{var e=t[expando].options.emptyInsertThreshold;if(e&&!lastChild(t)){var o=getRect(t),n=a>=o.left-e&&a<=o.right+e,e=l>=o.top-e&&l<=o.bottom+e;return n&&e?r=t:void 0}}),r},_prepareGroup=function(t){function i(l,r){return function(t,e,o,n){var a=t.options.group.name&&e.options.group.name&&t.options.group.name===e.options.group.name;if(null==l&&(r||a))return!0;if(null==l||!1===l)return!1;if(r&&"clone"===l)return l;if("function"==typeof l)return i(l(t,e,o,n),r)(t,e,o,n);e=(r?t:e).options.group.name;return!0===l||"string"==typeof l&&l===e||l.join&&-1<l.indexOf(e)}}let e={},o=t.group;o&&"object"==typeof o||(o={name:o}),e.name=o.name,e.checkPull=i(o.pull,!0),e.checkPut=i(o.put),e.revertClone=o.revertClone,t.group=e},_hideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&document.addEventListener("click",function(t){if(ignoreNextClick)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),ignoreNextClick=!1},!0);let nearestEmptyInsertDetectEvent=function(o){if(dragEl){o=o.touches?o.touches[0]:o;let e=_detectNearestEmptySortable(o.clientX,o.clientY);if(e){let t={};for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n]);t.target=t.rootEl=e,t.preventDefault=void 0,t.stopPropagation=void 0,e[expando]._onDragOver(t)}}},_checkOutsideTargetEl=function(t){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(t.target)};function Sortable(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw`Sortable: \`el\` must be an HTMLElement, not ${{}.toString.call(t)}`;this.el=t,this.options=e=Object.assign({},e),t[expando]=this;var o,n,a={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Sortable.supportPointer&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5,ghostPosition:[0,0]};for(o in PluginManager.initializePlugins(this,t,a),a)o in e||(e[o]=a[o]);for(n in _prepareGroup(e),this)"_"===n.charAt(0)&&"function"==typeof this[n]&&(this[n]=this[n].bind(this));this.nativeDraggable=!e.forceFallback&&supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?on(t,"pointerdown",this._onTapStart):(on(t,"mousedown",this._onTapStart),on(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(t,"dragover",this),on(t,"dragenter",this)),sortables.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Object.assign(this,AnimationStateManager())}function _globalDragOver(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function onMove(t,e,o,n,a,l,r,i){let s,d=t[expando],c=d.options.onMove,g;return!window.CustomEvent||IE11OrLess||Edge?(s=document.createEvent("Event"),s.initEvent("move",!0,!0)):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=e,s.from=t,s.dragged=o,s.draggedRect=n,s.related=a||e,s.relatedRect=l||getRect(e),s.willInsertAfter=i,s.originalEvent=r,t.dispatchEvent(s),c&&(g=c.call(d,s,r)),g}function _disableDraggable(t){t.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(t,e,o){o=getRect(getChild(o.el,0,o.options,!0));return e?t.clientX<o.left-10||t.clientY<o.top&&t.clientX<o.right:t.clientY<o.top-10||t.clientY<o.bottom&&t.clientX<o.left}function _ghostIsLast(t,e,o){o=getRect(lastChild(o.el,o.options.draggable));return e?t.clientX>o.right+10||t.clientX<=o.right&&t.clientY>o.bottom&&t.clientX>=o.left:t.clientX>o.right&&t.clientY>o.top||t.clientX<=o.right&&t.clientY>o.bottom+10}function _getSwapDirection(t,e,o,n,a,l,r,i){let s=n?t.clientY:t.clientX,d=n?o.height:o.width,c=n?o.top:o.left,g=n?o.bottom:o.right,h=!1;if(!r)if(i&&targetMoveDistance<d*a){if(!pastFirstInvertThresh&&(1===lastDirection?c+d*l/2<s:s<g-d*l/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)h=!0;else if(1===lastDirection?s<c+targetMoveDistance:s>g-targetMoveDistance)return-lastDirection}else if(c+d*(1-a)/2<s&&s<g-d*(1-a)/2)return _getInsertDirection(e);return h=h||r,h&&(s<c+d*l/2||g-d*l/2<s)?c+d/2<s?1:-1:0}function _getInsertDirection(t){return index(dragEl)<index(t)?1:-1}function _generateId(t){let e=t.tagName+t.className+t.src+t.href+t.textContent,o=e.length,n=0;for(;o--;)n+=e.charCodeAt(o);return n.toString(36)}function _saveInputCheckedState(t){savedInputChecked.length=0;var e=t.getElementsByTagName("input");let o=e.length;for(;o--;){var n=e[o];n.checked&&savedInputChecked.push(n)}}function _nextTick(t){return setTimeout(t,0)}function _cancelNextTick(t){return clearTimeout(t)}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(lastTarget=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,dragEl):this.options.direction},_onTapStart:function(d){if(d.cancelable){let e=this,o=this.el,t=this.options,n=t.preventOnFilter,a=d.type,l=d.touches&&d.touches[0]||d.pointerType&&"touch"===d.pointerType&&d,r=(l||d).target,i=d.target.shadowRoot&&(d.path&&d.path[0]||d.composedPath&&d.composedPath()[0])||r,s=t.filter;if(_saveInputCheckedState(o),!dragEl&&!(/mousedown|pointerdown/.test(a)&&0!==d.button||t.disabled)&&!i.isContentEditable&&(this.nativeDraggable||!Safari||!r||"SELECT"!==r.tagName.toUpperCase())&&(r=closest(r,t.draggable,o,!1),!(r&&r.animated||lastDownEl===r))){if(oldIndex=index(r),oldDraggableIndex=index(r,t.draggable),"function"==typeof s){if(s.call(this,d,r,this))return _dispatchEvent({sortable:e,rootEl:i,name:"filter",targetEl:r,toEl:o,fromEl:o}),pluginEvent("filter",e,{evt:d}),void(n&&d.cancelable&&d.preventDefault())}else if(s&&(s=s.split(",").some(function(t){if(t=closest(i,t.trim(),o,!1))return _dispatchEvent({sortable:e,rootEl:t,name:"filter",targetEl:r,fromEl:o,toEl:o}),pluginEvent("filter",e,{evt:d}),!0}),s))return void(n&&d.cancelable&&d.preventDefault());t.handle&&!closest(i,t.handle,o,!1)||this._prepareDragStart(d,l,r)}}},_prepareDragStart:function(t,e,o){let n=this,a=n.el,l=n.options,r=a.ownerDocument,i;var s;o&&!dragEl&&o.parentNode===a&&(s=getRect(o),rootEl=a,dragEl=o,parentEl=dragEl.parentNode,nextEl=dragEl.nextSibling,lastDownEl=o,activeGroup=l.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(e||t).clientX,clientY:(e||t).clientY},tapDistanceLeft=tapEvt.clientX-s.left,tapDistanceTop=tapEvt.clientY-s.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,dragEl.style["will-change"]="all",i=function(){pluginEvent("delayEnded",n,{evt:t}),Sortable.eventCanceled||window.disabledSortable?n._onDrop():(n._disableDelayedDragEvents(),!FireFox&&n.nativeDraggable&&(dragEl.draggable=!0),n._triggerDragStart(t,e),_dispatchEvent({sortable:n,name:"choose",originalEvent:t}),toggleClass(dragEl,l.chosenClass,!0))},l.ignore.split(",").forEach(function(t){find(dragEl,t.trim(),_disableDraggable)}),on(r,"dragover",nearestEmptyInsertDetectEvent),on(r,"mousemove",nearestEmptyInsertDetectEvent),on(r,"touchmove",nearestEmptyInsertDetectEvent),on(r,"mouseup",n._onDrop),on(r,"touchend",n._onDrop),on(r,"touchcancel",n._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:t}),!l.delay||l.delayOnTouchOnly&&!e||this.nativeDraggable&&(Edge||IE11OrLess)?i():Sortable.eventCanceled||window.disabledSortable?this._onDrop():(on(r,"mouseup",n._disableDelayedDrag),on(r,"touchend",n._disableDelayedDrag),on(r,"touchcancel",n._disableDelayedDrag),on(r,"mousemove",n._delayedDragTouchMoveHandler),on(r,"touchmove",n._delayedDragTouchMoveHandler),l.supportPointer&&on(r,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(()=>!window.disabledSortable&&i(),l.delay)))},_delayedDragTouchMoveHandler:function(t){t=t.touches?t.touches[0]:t;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;off(t,"mouseup",this._disableDelayedDrag),off(t,"touchend",this._disableDelayedDrag),off(t,"touchcancel",this._disableDelayedDrag),off(t,"mousemove",this._delayedDragTouchMoveHandler),off(t,"touchmove",this._delayedDragTouchMoveHandler),off(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):e?on(document,"touchmove",this._onTouchMove):on(document,"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){var o;awaitingDragStarted=!1,rootEl&&dragEl?(pluginEvent("dragStarted",this,{evt:e}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl),o=this.options,t||toggleClass(dragEl,o.dragClass,!1),toggleClass(dragEl,o.ghostClass,!0),Sortable.active=this,t&&this._appendGhost(e),_dispatchEvent({sortable:this,name:"start",originalEvent:e})):this._nulling()},_emulateDragOver:function(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();let t=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),e=t;for(;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY),t!==e);)e=t;if(dragEl.parentNode[expando]._isOutsideThisEl(t),e)do{if(e[expando])if(e[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break}while(t=e,e=e.parentNode);_unhideGhostForTarget()}},_onTouchMove:function(c){if(tapEvt){let t=this.options,e=t.fallbackTolerance,o=t.fallbackOffset,n=c.touches?c.touches[0]:c,a=ghostEl&&matrix(ghostEl,!0),l=ghostEl&&a&&a.a,r=ghostEl&&a&&a.d,i=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),s=(n.clientX-tapEvt.clientX+o.x)/(l||1)+(i?i[0]-ghostRelativeParentInitialScroll[0]:0)/(l||1),d=(n.clientY-tapEvt.clientY+o.y)/(r||1)+(i?i[1]-ghostRelativeParentInitialScroll[1]:0)/(r||1);if(!Sortable.active&&!awaitingDragStarted){if(e&&Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))<e)return;this._onDragStart(c,!0)}var g;ghostEl&&(a?(a.e+=s-(lastDx||0),a.f+=d-(lastDy||0)):a={a:1,b:0,c:0,d:1,e:s,f:d},g=`matrix(${a.a},${a.b},${a.c},${a.d},${a.e},${a.f})`,css(ghostEl,"webkitTransform",g),css(ghostEl,"mozTransform",g),css(ghostEl,"msTransform",g),css(ghostEl,"transform",g),lastDx=s,lastDy=d,touchEvt=n),c.cancelable&&c.preventDefault()}},_appendGhost:function(o){if(!ghostEl){const{options:n}=this;let t=n.fallbackOnTargetSelector?document.querySelector(n.fallbackOnTargetSelector)||document.body:rootEl,e=getRect(dragEl,!0,PositionGhostAbsolutely,!0,t);if(PositionGhostAbsolutely){for(ghostRelativeParent=t;"static"===css(ghostRelativeParent,"position")&&"none"===css(ghostRelativeParent,"transform")&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),e.top+=ghostRelativeParent.scrollTop,e.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}ghostEl=n.ghostCloneProvider?n.ghostCloneProvider(dragEl):dragEl.cloneNode(!0),toggleClass(ghostEl,n.ghostClass,!1),toggleClass(ghostEl,n.fallbackClass,!0),toggleClass(ghostEl,n.dragClass,!0),ghostEl.style.cssText=`
         position: fixed;
         top: 0;
         left: 0;
         display: block;
         transform: translate(${o.clientX+n.ghostPosition[0]}px, ${o.clientY+n.ghostPosition[1]}px) translate(-100%, -100%);`,Sortable.ghost=ghostEl,t.appendChild(ghostEl)}},_onDragStart:function(t,e){let o=this,n=t.dataTransfer,a=o.options;pluginEvent("dragStart",this,{evt:t}),Sortable.eventCanceled||window.disabledSortable?this._onDrop():(pluginEvent("setupClone",this),Sortable.eventCanceled||window.disabledSortable||(cloneEl=clone(dragEl),cloneEl.draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),o.cloneId=_nextTick(function(){pluginEvent("clone",o),Sortable.eventCanceled||window.disabledSortable||(o.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),o._hideClone(),_dispatchEvent({sortable:o,name:"clone"}))}),e||toggleClass(dragEl,a.dragClass,!0),e?(ignoreNextClick=!0,o._loopId=setInterval(o._emulateDragOver,50)):(off(document,"mouseup",o._onDrop),off(document,"touchend",o._onDrop),off(document,"touchcancel",o._onDrop),n&&(n.effectAllowed="move",a.setData&&a.setData.call(o,n,dragEl)),on(document,"drop",o),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,o._dragStartId=_nextTick(o._dragStarted.bind(o,e,t)),on(document,"selectstart",o),moved=!0,Safari&&css(document.body,"user-select","none"))},_onDragOver:function(c){let g=this.el,h=c.target,u,p,o,E=this.options,t=E.group,e=Sortable.active,n=activeGroup===t,a=E.sort,l=putSortable||e,v,r=this,i=!1;if(!_silent){if(void 0!==c.preventDefault&&c.cancelable&&c.preventDefault(),h=closest(h,E.draggable,g,!0),d("dragOver"),Sortable.eventCanceled||window.disabledSortable)return i;if(dragEl.contains(c.target)||h.animated&&h.animatingX&&h.animatingY||r._ignoreWhileAnimating===h)return m(!1);if(ignoreNextClick=!1,e&&!E.disabled&&(n?a||(o=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,e,dragEl,c))&&t.checkPut(this,e,dragEl,c))){if(v="vertical"===this._getDirection(c,h),u=getRect(dragEl),d("dragOverValid"),Sortable.eventCanceled||window.disabledSortable)return i;if(o)return parentEl=rootEl,b(),this._hideClone(),d("revert"),Sortable.eventCanceled||window.disabledSortable||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),m(!0);var s=lastChild(g,E.draggable);if(!s||_ghostIsLast(c,v,this)&&!s.animated){if(s===dragEl)return m(!1);if(s&&g===c.target&&(h=s),h&&(p=getRect(h)),!1!==onMove(rootEl,g,dragEl,u,h,p,c,!!h))return b(),g.appendChild(dragEl),parentEl=g,D(),m(!0)}else if(s&&_ghostIsFirst(c,v,this)){var f=getChild(g,0,E,!0);if(f===dragEl)return m(!1);if(h=f,p=getRect(h),!1!==onMove(rootEl,g,dragEl,u,h,p,c,!1))return b(),g.insertBefore(dragEl,f),parentEl=g,D(),m(!0)}else if(h.parentNode===g){p=getRect(h);let e,t,o=dragEl.parentNode!==g,n=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||u,h.animated&&h.toRect||p,v),a=v?"top":"left",l=isScrolledPast(h,"top","top")||isScrolledPast(dragEl,"top","top"),r=l?l.scrollTop:void 0;lastTarget!==h&&(t=p[a],pastFirstInvertThresh=!1,isCircumstantialInvert=!n&&E.invertSwap||o);let i;if(0!==(e=_getSwapDirection(c,h,p,v,n?1:E.swapThreshold,null==E.invertedSwapThreshold?E.swapThreshold:E.invertedSwapThreshold,isCircumstantialInvert,lastTarget===h))){let t=index(dragEl);for(;t-=e,i=parentEl.children[t],i&&("none"===css(i,"display")||i===ghostEl););}if(0===e||i===h)return m(!1);lastTarget=h,lastDirection=e;let s=h.nextElementSibling,d=!1;d=1===e;f=onMove(rootEl,g,dragEl,u,h,p,c,d);if(!1!==f)return 1!==f&&-1!==f||(d=1===f),_silent=!0,setTimeout(_unsilent,30),b(),d&&!s?g.appendChild(dragEl):h.parentNode.insertBefore(dragEl,d?s:h),l&&scrollBy(l,0,r-l.scrollTop),parentEl=dragEl.parentNode,void 0===t||isCircumstantialInvert||(targetMoveDistance=Math.abs(t-getRect(h)[a])),D(),m(!0)}if(g.contains(dragEl))return m(!1)}return!1}function d(t,e){pluginEvent(t,r,{evt:c,isOwner:n,axis:v?"vertical":"horizontal",revert:o,dragRect:u,targetRect:p,canSort:a,fromSortable:l,target:h,completed:m,onMove(t,e){return onMove(rootEl,g,dragEl,u,t,getRect(t),c,e)},changed:D,...e})}function b(){d("dragOverAnimationCapture"),r.captureAnimationState(),r!==l&&l.captureAnimationState()}function m(t){return d("dragOverCompleted",{insertion:t}),t&&(n?e._hideClone():e._showClone(r),r!==l&&(toggleClass(dragEl,(putSortable||e).options.ghostClass,!1),toggleClass(dragEl,E.ghostClass,!0)),putSortable!==r&&r!==Sortable.active?putSortable=r:r===Sortable.active&&putSortable&&(putSortable=null),l===r&&(r._ignoreWhileAnimating=h),r.animateAll(function(){d("dragOverAnimationComplete"),r._ignoreWhileAnimating=null}),r!==l&&(l.animateAll(),l._ignoreWhileAnimating=null)),(h===dragEl&&!dragEl.animated||h===g&&!h.animated)&&(lastTarget=null),E.dragoverBubble||c.rootEl||h===document||(dragEl.parentNode[expando]._isOutsideThisEl(c.target),t||nearestEmptyInsertDetectEvent(c)),!E.dragoverBubble&&c.stopPropagation&&c.stopPropagation(),i=!0}function D(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,E.draggable),_dispatchEvent({sortable:r,name:"change",toEl:g,newIndex:newIndex,newDraggableIndex:newDraggableIndex,originalEvent:c})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function(){var t=this.el.ownerDocument;off(t,"mouseup",this._onDrop),off(t,"touchend",this._onDrop),off(t,"pointerup",this._onDrop),off(t,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function(t){var e=this.el,o=this.options;newIndex=index(dragEl),newDraggableIndex=index(dragEl,o.draggable),pluginEvent("drop",this,{evt:t}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,o.draggable),Sortable.eventCanceled||window.disabledSortable||(awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),t&&(moved&&(t.cancelable&&t.preventDefault(),o.dropBubble||t.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&"clone"!==putSortable.lastPutMode)&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,(putSortable||this).options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:t}),rootEl!==parentEl?(0<=newIndex&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:t}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:t}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:t}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:t})),putSortable&&putSortable.save()):newIndex!==oldIndex&&0<=newIndex&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:t}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:t})),Sortable.active&&(null!=newIndex&&-1!==newIndex||(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach(function(t){t.checked=!0}),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(t),_globalDragOver(t));break;case"selectstart":t.preventDefault()}},toArray:function(){let t=[],e,o=this.el.children,n=0,a=o.length,l=this.options;for(;n<a;n++)e=o[n],closest(e,l.draggable,this.el,!1)&&t.push(e.getAttribute(l.dataIdAttr)||_generateId(e));return t},sort:function(t,e){let o={},n=this.el;this.toArray().forEach(function(t,e){e=n.children[e];closest(e,this.options.draggable,n,!1)&&(o[t]=e)},this),e&&this.captureAnimationState(),t.forEach(function(t){o[t]&&(n.removeChild(o[t]),n.appendChild(o[t]))}),e&&this.animateAll()},save:function(){let t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return closest(t,e||this.options.draggable,this.el,!1)},option:function(t,e){let o=this.options;if(void 0===e)return o[t];var n=PluginManager.modifyOption(this,t,e);o[t]=void 0!==n?n:e,"group"===t&&_prepareGroup(o)},destroy:function(){pluginEvent("destroy",this);let t=this.el;t[expando]=null,off(t,"mousedown",this._onTapStart),off(t,"touchstart",this._onTapStart),off(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(t,"dragover",this),off(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=t=null},_hideClone:function(){cloneHidden||(pluginEvent("hideClone",this),Sortable.eventCanceled||window.disabledSortable||(css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0))},_showClone:function(t){"clone"===t.lastPutMode?cloneHidden&&(pluginEvent("showClone",this),Sortable.eventCanceled||window.disabledSortable||(dragEl.parentNode!=rootEl||this.options.group.revertClone?nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl):rootEl.insertBefore(cloneEl,dragEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1)):this._hideClone()}},documentExists&&on(document,"touchmove",function(t){(Sortable.active||awaitingDragStarted)&&t.cancelable&&t.preventDefault()}),Sortable.utils={on:on,off:off,css:css,find:find,is:function(t,e){return!!closest(t,e,t,!1)},extend:extend,throttle:throttle,closest:closest,toggleClass:toggleClass,clone:clone,index:index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild:getChild},Sortable.get=function(t){return t[expando]},Sortable.mount=function(...t){(t=t[0].constructor===Array?t[0]:t).forEach(t=>{if(!t.prototype||!t.prototype.constructor)throw`Sortable: Mounted plugin must be a constructor function, not ${{}.toString.call(t)}`;t.utils&&(Sortable.utils={...Sortable.utils,...t.utils}),PluginManager.mount(t)})},Sortable.create=function(t,e){return new Sortable(t,e)},Sortable.version=version;export default Sortable;